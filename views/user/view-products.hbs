{{#if userHome}}
<!-- banner -->
<div class="banner_top" id="home">
	<div class="wrapper_top_w3layouts">

		<div class="header_agileits">
			<div class="logo inner_page_log">
				<h1><a class="navbar-brand" href="/"><span>Downy</span> <i>Shoes</i></a></h1>
			</div>
			<div class="overlay overlay-contentpush">
				<button type="button" class="overlay-close"><i class="fa fa-times" aria-hidden="true"></i></button>

				<nav>
					<ul>
						{{#if user}}
						<h1 style="margin-bottom: 70px;">Hi, <span style="color: red;">{{user.Name}}</span></h1>
						{{/if}}
						<li><a href="/" class="active">Home</a></li>
						{{#if user}}
						<li><a href="/view-orders">Orders</a></li>
						<li><a href="/view-profile">Profile</a></li>
						<li><a href="/logout">Logout</a></li>
						{{else}}
						<li><a href="/login">Login</a></li>
						<li><a href="/signup">Sign Up</a></li>
						{{/if}}


						{{!-- <li>
							<div class="dropdown">
								<button class="btn btn-success dropdown-toggle" type="button" id="dropdownMenuButton"
									data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
									{{#if user}}

									{{user.Name}}
									{{else}}
									Account
									{{/if}}
								</button>
								<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
									{{#if user}}
									<a class="dropdown-item" href="/logout">Logout</a>
									{{else}}
									<a class="dropdown-item" href="/login">Login</a>
									{{/if}}
								</div>
							</div>
						</li> --}}

					</ul>
				</nav>
			</div>
			<div class="mobile-nav-button">
				<button id="trigger-overlay" type="button"><i class="fa fa-bars" aria-hidden="true"></i></button>
			</div>
			<!-- cart details -->
			<div class="top_nav_right">
				<div class="shoecart shoecart2 cart cart box_1">
					<form action="/cart" method="get" class="last">
						<input type="hidden" name="cmd" value="_cart">
						<input type="hidden" name="display" value="1">
						<button class="top_shoe_cart" type="submit" name="submit" value=""><i
								class="fa fa-cart-arrow-down" aria-hidden="true"></i></button>
						<span class="badge badge-success" id="cart-count">{{cartCount}}</span>
					</form>
				</div>
			</div>
		</div>
	</div>
	<!-- //cart details -->
	<div class="clearfix"></div>
</div>

<!-- /slider -->
<div class="slider">
	<div class="callbacks_container">
		<ul class="rslides callbacks callbacks1" id="slider4">
			<li>
				<div class="banner-top1">
					<div class="banner-info-wthree">
						<h3>Adidas</h3>
						<p>For All Walks of Life.</p>
					</div>
				</div>
			</li>
		</ul>
	</div>
	<div class="clearfix"> </div>
</div>
<!-- //slider -->
</div>
</div>
<!-- //banner -->
<!-- /girds_bottom-->
<div class="grids_bottom">
	<div class="style-grids">
		<div class="col-md-6 style-grid style-grid-1">
			<img src="images/b1.jpg" alt="shoe">
		</div>
	</div>
	<div class="col-md-6 style-grid style-grid-2">
		<div class="style-image-1_info">
			<div class="style-grid-2-text_info">
				<h3>Nike DOWNSHIFTER</h3>
				<p>Itaque earum rerum hic tenetur a sapiente delectus reiciendis maiores alias consequatur.sed quia non
					numquam eius modi
					tempora incidunt ut labore et dolore .</p>
				<div class="shop-button">
					<a href="#shopnow">Shop Now</a>
				</div>
			</div>
		</div>
		<div class="style-image-2">
			<img src="images/b2.jpg" alt="shoe">
			<div class="style-grid-2-text">
				<h3>Air force</h3>
			</div>
		</div>
	</div>
	<div class="clearfix"></div>
</div>
</div>
<!-- //grids_bottom-->
{{/if}}




<!-- top Products -->
<section class="shopnow" id="shopnow">
	<div class="ads-grid_shop">
		<div class="shop_inner_inf">
			<!-- tittle heading -->

			<!-- //tittle heading -->
			<!-- product left -->
			<div class="side-bar col-md-3">
				<div class="search-hotel">
					<h3 class="agileits-sear-head">Search Here..</h3>
					<form id="searchForm">
						<input type="search" id="searchInput" placeholder="Product name..." name="search" required="">
						<input type="submit" value=" ">
					</form>
				</div>
				<!--preference -->
				{{!-- <div class="left-side">
					<h3 class="agileits-sear-head">Occasion</h3>
					<ul>
						<li>
							<input type="checkbox" class="checked">
							<span class="span">Casuals</span>
						</li>
						<li>
							<input type="checkbox" class="checked">
							<span class="span">Party</span>
						</li>
						<li>
							<input type="checkbox" class="checked">
							<span class="span">Wedding</span>
						</li>
						<li>
							<input type="checkbox" class="checked">
							<span class="span">Ethnic</span>
						</li>
					</ul>
				</div> --}}
				<!-- // preference -->
				<!-- discounts -->
				<div class="left-side">
					<h3 class="agileits-sear-head">Discount</h3>
					<ul>
						<li>
							<input type="checkbox" class="discount-checkbox" value="10">
							<span class="span">10% or More</span>
						</li>
						<li>
							<input type="checkbox" class="discount-checkbox" value="20">
							<span class="span">20% or More</span>
						</li>
						<li>
							<input type="checkbox" class="discount-checkbox" value="30">
							<span class="span">30% or More</span>
						</li>
						<li>
							<input type="checkbox" class="discount-checkbox" value="50">
							<span class="span">50% or More</span>
						</li>
						<li>
							<input type="checkbox" class="discount-checkbox" value="60">
							<span class="span">60% or More</span>
						</li>
					</ul>
				</div>
				<!-- //discounts -->
				<!-- reviews -->
				{{!-- <div class="customer-rev left-side">
					<h3 class="agileits-sear-head">Customer Review</h3>
					<ul>
						<li>
							<a href="#">
								<i class="fa fa-star" aria-hidden="true"></i>
								<i class="fa fa-star" aria-hidden="true"></i>
								<i class="fa fa-star" aria-hidden="true"></i>
								<i class="fa fa-star" aria-hidden="true"></i>
								<i class="fa fa-star" aria-hidden="true"></i>
								<span>5.0</span>
							</a>
						</li>
						<li>
							<a href="#">
								<i class="fa fa-star" aria-hidden="true"></i>
								<i class="fa fa-star" aria-hidden="true"></i>
								<i class="fa fa-star" aria-hidden="true"></i>
								<i class="fa fa-star" aria-hidden="true"></i>
								<i class="fa fa-star-o" aria-hidden="true"></i>
								<span>4.0</span>
							</a>
						</li>
						<li>
							<a href="#">
								<i class="fa fa-star" aria-hidden="true"></i>
								<i class="fa fa-star" aria-hidden="true"></i>
								<i class="fa fa-star" aria-hidden="true"></i>
								<i class="fa fa-star-half-o" aria-hidden="true"></i>
								<i class="fa fa-star-o" aria-hidden="true"></i>
								<span>3.5</span>
							</a>
						</li>
						<li>
							<a href="#">
								<i class="fa fa-star" aria-hidden="true"></i>
								<i class="fa fa-star" aria-hidden="true"></i>
								<i class="fa fa-star" aria-hidden="true"></i>
								<i class="fa fa-star-o" aria-hidden="true"></i>
								<i class="fa fa-star-o" aria-hidden="true"></i>
								<span>3.0</span>
							</a>
						</li>
						<li>
							<a href="#">
								<i class="fa fa-star" aria-hidden="true"></i>
								<i class="fa fa-star" aria-hidden="true"></i>
								<i class="fa fa-star-half-o" aria-hidden="true"></i>
								<i class="fa fa-star-o" aria-hidden="true"></i>
								<i class="fa fa-star-o" aria-hidden="true"></i>
								<span>2.5</span>
							</a>
						</li>
					</ul>
				</div> --}}
				<!-- //reviews -->
				<!-- deals -->
				{{!-- <div class="deal-leftmk left-side">
					<h3 class="agileits-sear-head">Special Deals</h3>
					{{#each products}}
					<div class="special-sec1">
						<div class="col-xs-4 img-deals">
							<img src="/product-images/{{this._id}}.jpg" alt="">
						</div>
						<div class="col-xs-8 img-deal1">
							<h3>{{this.Name}}</h3>
							<a href="/single?id={{this._id}}">Rs. {{this.Price}}</a>
						</div>
						<div class="clearfix"></div>
					</div>
					{{/each}}
				</div> --}}
				<!-- //deals -->

			</div>
			<!-- //product left -->

			<!-- product right -->
			<div class="left-ads-display col-md-9">
				<div class="wrapper_top_shop">
					<div class="col-md-6 shop_left">
						<img src="images/banner3.jpg" alt="">
						<h6>10% off</h6>
					</div>
					<div class="col-md-6 shop_right">
						<img src="images/banner2.jpg" alt="">
						<h6>20% off</h6>
					</div>
					<div class="clearfix"></div>
					<!-- product-sec1 -->
					<div class="product-sec1">


<!-- Add a section to display search results -->
<div class="search-results">

</div>

<div class="discount-results">

</div>


						
						<!--/mens-->
  						<h2>All products</h2>
						{{#each products}}
						<div class="col-md-4 product-men">
							<div class="product-shoe-info shoe">
								<div class="men-pro-item">
									<div class="men-thumb-item">
										<img src="/product-images/{{this._id}}.jpg" alt="">
										<div class="men-cart-pro">
											<div class="inner-men-cart-pro">
												<a href="/single?id={{this._id}}" class="link-product-add-cart">Quick
													View</a>
											</div>
										</div>
										<span class="product-new-top">New</span>
									</div>
									<div class="item-info-product">
										<h4>
											<a href="/single?id={{this._id}}">{{this.Name}}</a>
										</h4>
										<div class="info-product-price">
											<div class="grid_meta">
												<div class="product_price">
													<div class="grid-price ">
														<span class="money ">Rs.
															{{this.Price}}</span><del>Rs. {{this.actualPrice}}</del>
																<p>{{this.Offer}}% off</p>


													</div>
												</div>
												
											</div>
											<div class="shoe single-item hvr-outline-out">
												<button type="button" onclick="addToCart('{{this._id}}')"
													value="{{this._id}}" class="shoe-cart pshoe-cart"><i
														class="fa fa-cart-plus" aria-hidden="true"></i></button>
											</div>
										</div>
										<div class="clearfix"></div>
									</div>
								</div>
							</div>
						</div>
						{{/each}}
						<!-- //mens -->
						<div class="clearfix"></div>

					</div>

					<!-- //product-sec1 -->
					<div class="col-md-6 shop_left shp">
						<img src="images/banner4.jpg" alt="">
						<h6>21% off</h6>
					</div>
					<div class="col-md-6 shop_right shp">
						<img src="images/banner1.jpg" alt="">
						<h6>31% off</h6>
					</div>
					<div class="clearfix"></div>
				</div>
			</div>
			<div class="clearfix"></div>
		</div>
	</div>
</section>
<!-- //top products -->


<script>
  document.addEventListener('DOMContentLoaded', function () {
    const searchForm = document.getElementById('searchForm');
    const searchInput = document.getElementById('searchInput');

    // Function to perform the search
    function performSearch(query, products) {
      query = query.toLowerCase().trim();

      // Filter products based on the search query
      const searchResults = products.filter(product => product.Name.toLowerCase().includes(query));

      return searchResults; // Return the filtered results
    }

    // Function to display the search results in the template
    function displayResults(results) {
    const searchResultsSection = document.querySelector('.search-results');
    searchResultsSection.innerHTML = ''; // Clear previous results

		
    if (results.length > 0) {
    	const headingDiv = document.createElement('div');
		headingDiv.innerHTML = `<h2>Search Results</h2>`
		searchResultsSection.classList.add('row');
        searchResultsSection.appendChild(headingDiv);
          
      results.forEach(product => {
        // Create HTML elements for each search result and append them to the searchResultsSection
        const productDiv = document.createElement('div');
      productDiv.innerHTML = `
    <div class="col-md-4 product-men">
      <div class="product-shoe-info shoe">
        <div class="men-pro-item">
          <!-- Render product details as needed -->
          <div class="men-thumb-item">
            <img src="/product-images/${product._id}.jpg" alt="">
            <div class="men-cart-pro">
              <div class="inner-men-cart-pro">
                <a href="/single?id=${product._id}" class="link-product-add-cart">Quick View</a>
              </div>
            </div>
            <span class="product-new-top">New</span>
          </div>
          <div class="item-info-product">
            <h4>
              <a href="/single?id=${product._id}">${product.Name}</a>
            </h4>
            <div class="info-product-price">
              <div class="grid_meta">
                <div class="product_price">
                  <div class="grid-price">
                    <span class="money">Rs. ${product.Price}</span><del>Rs. ${product.actualPrice}</del>
                  </div>
                </div>
              </div>
              <div class="shoe single-item hvr-outline-out">
                <button type="button" onclick="addToCart('${product._id}')" value="${product._id}"
                  class="shoe-cart pshoe-cart"><i class="fa fa-cart-plus" aria-hidden="true"></i></button>
              </div>
            </div>
            <div class="clearfix"></div>
          </div>
        </div>
      </div>
    </div>
        `;
        searchResultsSection.appendChild(productDiv);

      });
    } else {
      // If no results found, display a message
      searchResultsSection.innerHTML = '<p>No results found.</p>';
    }
  }

    // Event listener for form submission
    searchForm.addEventListener('submit', function (event) {
      event.preventDefault();
      var productsData = {{{renderProducts}}};

      const query = searchInput.value.trim();
      const filteredData = performSearch(query, productsData);
      displayResults(filteredData);
    });
  });
</script>

<script>
	document.addEventListener('DOMContentLoaded', function () {
    const discountCheckboxes = document.querySelectorAll('.discount-checkbox');
    const productsData = {{{renderProducts}}}; // Your product data

    function applyDiscountFilter() {
        const selectedDiscounts = Array.from(discountCheckboxes)
            .filter(checkbox => checkbox.checked)
            .map(checkbox => parseInt(checkbox.value));
console.log(selectedDiscounts)

        if (selectedDiscounts.length === 0) {
            // If no checkboxes are checked, clear the search results
            clearResults();
        } else {
            // Filter products based on the selected discount ranges
            const filteredData = productsData.filter(product => {
                return selectedDiscounts.some(discount => product.Offer >= discount);
            });

            displayResults(filteredData);
        }
    }

    // Add event listeners to the discount checkboxes
    discountCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', applyDiscountFilter);
    });

    // Function to display the search results in the template (similar to your previous code)
    function displayResults(results) {
		console.log(results)
        const searchResultsSection = document.querySelector('.discount-results');
        searchResultsSection.innerHTML = ''; // Clear previous results

        if (results.length > 0) {
    	const headingDiv = document.createElement('div');
		headingDiv.innerHTML = `<h2>Discount Results</h2>`
		searchResultsSection.classList.add('row');
        searchResultsSection.appendChild(headingDiv);
          
      results.forEach(product => {
        // Create HTML elements for each search result and append them to the searchResultsSection
        const productDiv = document.createElement('div');
      productDiv.innerHTML = `
    <div class="col-md-4 product-men">
      <div class="product-shoe-info shoe">
        <div class="men-pro-item">
          <!-- Render product details as needed -->
          <div class="men-thumb-item">
            <img src="/product-images/${product._id}.jpg" alt="">
            <div class="men-cart-pro">
              <div class="inner-men-cart-pro">
                <a href="/single?id=${product._id}" class="link-product-add-cart">Quick View</a>
              </div>
            </div>
            <span class="product-new-top">New</span>
          </div>
          <div class="item-info-product">
            <h4>
              <a href="/single?id=${product._id}">${product.Name}</a>
            </h4>
            <div class="info-product-price">
              <div class="grid_meta">
                <div class="product_price">
                  <div class="grid-price">
                    <span class="money">Rs. ${product.Price}</span><del>Rs. ${product.actualPrice}</del>
					<p>${product.Offer}% off</p>
                  </div>
                </div>
              </div>
              <div class="shoe single-item hvr-outline-out">
                <button type="button" onclick="addToCart('${product._id}')" value="${product._id}"
                  class="shoe-cart pshoe-cart"><i class="fa fa-cart-plus" aria-hidden="true"></i></button>
              </div>
            </div>
            <div class="clearfix"></div>
          </div>
        </div>
      </div>
    </div>
        `;
        searchResultsSection.appendChild(productDiv);

      });
    } else {
      // If no results found, display a message
      searchResultsSection.innerHTML = '<p>No results found.</p>';
    }
    }
	function clearResults() {
        const searchResultsSection = document.querySelector('.discount-results');
        searchResultsSection.innerHTML = ''; // Clear all results
    }
});

</script>


<script>
	$(document).ready(function () {
		$('.shoe-cart').click(function (e) {

			var id = $(this).val();

			$.ajax({
				url: "/addToCart/" + id,
				success: function (response) {
					Swal.fire({
						position: 'middle',
						icon: 'success',
						title: 'Item added to cart 👍',
						showConfirmButton: false,
						timer: 1500
					}).then((confirmed) => {
						// window.location.reload();
					})
				}
			})
		})
	})
</script>